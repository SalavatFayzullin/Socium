# Социальная платформа с аутентификацией на Spring Boot

Полноценная социальная платформа, построенная на Spring Boot, которая демонстрирует аутентификацию пользователей, личные профили, обновления статуса и посты сообщества с современным адаптивным интерфейсом.

## Функциональность

### Аутентификация и безопасность
- **Регистрация пользователей**: Создание новых аккаунтов с валидацией имени пользователя, email и пароля
- **Аутентификация пользователей**: Безопасная система входа с Spring Security
- **Шифрование паролей**: Хеширование паролей BCrypt для безопасности
- **Управление сессиями**: Безопасная обработка сессий

### Социальные функции
- **Личный профиль**: Настраиваемая страница профиля пользователя
- **Обновления статуса**: Установка и обновление текущего статуса (до 200 символов)
- **Создание постов**: Создание и обмен постами с сообществом (до 1000 символов)
- **Лента сообщества**: Просмотр всех постов пользователей в хронологическом порядке
- **Профили пользователей**: Просмотр профилей других пользователей и их постов
- **Управление постами**: Редактирование и удаление собственных постов

### UI и дизайн
- **Адаптивный дизайн**: Современный интерфейс на базе Bootstrap с градиентным дизайном
- **Интерактивные элементы**: Анимации при наведении и плавные переходы
- **Валидация форм**: Валидация на стороне клиента и сервера
- **Обновления в реальном времени**: Динамическая загрузка контента и пагинация

### Технические особенности
- **База данных H2**: Встроенная база данных для разработки и тестирования
- **JPA связи**: Отношения один-ко-многим между пользователями и постами
- **Пагинация**: Эффективная обработка больших списков постов
- **Отслеживание времени**: Автоматическое создание временных меток для постов

## Используемые технологии

- **Backend**: Spring Boot 3.2.0, Spring Security, Spring Data JPA
- **Frontend**: Thymeleaf, Bootstrap 5.1.3, Font Awesome 6.0.0
- **База данных**: H2 (в памяти)
- **Инструмент сборки**: Maven
- **Версия Java**: 17

## Требования

- Java 17 или выше
- Maven 3.6 или выше

## Начало работы

### 1. Клонировать репозиторий
```bash
git clone <repository-url>
cd spring-auth-app
```

### 2. Собрать приложение
```bash
mvn clean install
```

### 3. Запустить приложение
```bash
mvn spring-boot:run
```

Альтернативно, можно запустить JAR файл:
```bash
java -jar target/spring-auth-app-1.0.0.jar
```

### 4. Доступ к приложению
Откройте браузер и перейдите по адресу: `http://localhost:8080`

## URL адреса приложения

- **Главная страница**: `http://localhost:8080/`
- **Вход**: `http://localhost:8080/login`
- **Регистрация**: `http://localhost:8080/register`
- **Панель управления**: `http://localhost:8080/dashboard` (требует аутентификации)
- **Личный профиль**: `http://localhost:8080/personal` (требует аутентификации)
- **Лента сообщества**: `http://localhost:8080/personal/feed` (требует аутентификации)
- **Профиль пользователя**: `http://localhost:8080/personal/user/{username}` (требует аутентификации)
- **Консоль базы данных H2**: `http://localhost:8080/h2-console`

### Доступ к консоли базы данных H2
- **JDBC URL**: `jdbc:h2:mem:testdb`
- **Имя пользователя**: `sa`
- **Пароль**: `password`

## Использование

### Регистрация и вход
1. Перейдите на страницу регистрации
2. Заполните обязательные поля:
   - Имя пользователя (3-50 символов, уникальное)
   - Email (корректный формат email, уникальный)
   - Пароль (минимум 6 символов)
3. Отправьте форму
4. После успешной регистрации вы будете перенаправлены на страницу входа
5. Войдите, используя свои учетные данные

### Управление личным профилем
1. После входа перейдите в "Мой профиль"
2. **Обновить статус**: Измените свой текущий статус (до 200 символов)
3. **Создать посты**: Поделитесь своими мыслями с сообществом (до 1000 символов)
4. **Управление постами**: Просматривайте, редактируйте или удаляйте свои посты
5. **Статистика профиля**: Просматривайте количество постов и информацию об аккаунте

### Взаимодействие с сообществом
1. **Лента сообщества**: Просматривайте все посты всех пользователей
2. **Профили пользователей**: Нажимайте на имена пользователей для просмотра их профилей
3. **Пагинация**: Переходите между несколькими страницами постов
4. **Обновления в реальном времени**: Посты отображаются в хронологическом порядке

### Панель управления
- Просмотр статуса аккаунта и персональной статистики
- Быстрый доступ к профилю и ленте
- Доступ к консоли базы данных H2 для разработки

## Структура проекта

```
src/
├── main/
│   ├── java/com/example/
│   │   ├── SpringAuthApplication.java          # Главный класс приложения
│   │   ├── config/
│   │   │   └── SecurityConfig.java             # Конфигурация Spring Security
│   │   ├── controller/
│   │   │   ├── AuthController.java             # Контроллер аутентификации
│   │   │   └── PersonalController.java         # Контроллер личных страниц и постов
│   │   ├── model/
│   │   │   ├── User.java                       # Сущность пользователя со статусом
│   │   │   └── Post.java                       # Сущность поста
│   │   ├── repository/
│   │   │   ├── UserRepository.java             # Репозиторий пользователей
│   │   │   └── PostRepository.java             # Репозиторий постов
│   │   ├── security/
│   │   │   └── CustomUserDetailsService.java  # Пользовательский UserDetailsService
│   │   └── service/
│   │       ├── UserService.java                # Сервисный слой пользователей
│   │       └── PostService.java               # Сервисный слой постов
│   └── resources/
│       ├── application.properties              # Конфигурация приложения
│       └── templates/                          # Шаблоны Thymeleaf
│           ├── index.html                      # Главная страница
│           ├── login.html                      # Страница входа
│           ├── register.html                   # Страница регистрации
│           ├── dashboard.html                  # Панель пользователя
│           ├── personal.html                   # Страница личного профиля
│           ├── feed.html                       # Лента сообщества
│           ├── user-profile.html               # Профили других пользователей
│           └── layout.html                     # Базовый шаблон
└── pom.xml                                     # Maven зависимости
```

## API Endpoints

### Аутентификация
- `GET /` - Главная страница
- `GET /login` - Страница входа
- `POST /login` - Обработка входа
- `GET /register` - Страница регистрации
- `POST /register` - Обработка регистрации
- `POST /logout` - Выход пользователя

### Личные функции (Аутентифицированные)
- `GET /dashboard` - Панель пользователя
- `GET /personal` - Страница личного профиля
- `POST /personal/status` - Обновление статуса пользователя
- `POST /personal/post` - Создание нового поста
- `POST /personal/post/{id}/delete` - Удаление поста
- `GET /personal/feed` - Лента сообщества с пагинацией
- `GET /personal/user/{username}` - Просмотр профиля пользователя

## Схема базы данных

### Таблица Users
- `id` (Первичный ключ)
- `username` (Уникальный)
- `email` (Уникальный)
- `password` (Зашифрованный)
- `enabled` (Логический)
- `status` (Текст статуса пользователя)

### Таблица Posts
- `id` (Первичный ключ)
- `content` (Содержимое поста)
- `created_at` (Временная метка)
- `author_id` (Внешний ключ к Users)

## Функции безопасности

- **Кодирование паролей BCrypt**: Все пароли шифруются с использованием BCrypt
- **Защита от CSRF**: Включена защита от межсайтовой подделки запросов
- **Управление сессиями**: Безопасная обработка сессий
- **Валидация входных данных**: Валидация на стороне сервера с Bean Validation
- **Предотвращение SQL инъекций**: Паттерн JPA репозитория предотвращает SQL инъекции
- **Авторизация**: Контроль доступа на основе ролей для защищенных endpoints

## Настройка

### Конфигурация базы данных
Для использования другой базы данных измените `application.properties`:
```properties
# Для MySQL
spring.datasource.url=jdbc:mysql://localhost:3306/your_database
spring.datasource.username=your_username
spring.datasource.password=your_password
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
spring.jpa.database-platform=org.hibernate.dialect.MySQL8Dialect
```

### Настройка UI
- Изменяйте CSS в секциях `<style>` HTML шаблонов
- Обновляйте версию Bootstrap в файлах шаблонов
- Изменяйте цветовую схему, обновляя пользовательские свойства CSS
- Настраивайте лимиты отображения постов и настройки пагинации

### Расширения функциональности
- Добавьте аватары пользователей и загрузку изображений
- Реализуйте систему лайков/комментариев для постов
- Добавьте функциональность подписки/подписчиков пользователей
- Реализуйте уведомления в реальном времени
- Добавьте категории постов и теги

## Разработка

### Запуск в режиме разработки
```bash
mvn spring-boot:run -Dspring-boot.run.profiles=dev
```

### Сборка для продакшена
```bash
mvn clean package -Pproduction
```

### Тестирование
```bash
mvn test
```

## Устранение неполадок

### Распространенные проблемы

1. **Порт 8080 уже используется**
   - Измените порт в `application.properties`: `server.port=8081`

2. **Проблемы с подключением к базе данных**
   - Проверьте настройки консоли H2
   - Убедитесь в правильности URL базы данных и учетных данных

3. **Аутентификация не работает**
   - Очистите кэш браузера и cookies
   - Проверьте, существует ли пользователь в базе данных

4. **Посты не отображаются**
   - Проверьте, правильно ли аутентифицирован пользователь
   - Убедитесь, что база данных содержит данные постов

5. **Обновления статуса не сохраняются**
   - Убедитесь, что статус содержит менее 200 символов
   - Проверьте ошибки валидации в консоли браузера

## Участие в разработке

1. Сделайте fork репозитория
2. Создайте ветку для новой функции
3. Внесите изменения
4. Добавьте тесты, если применимо
5. Отправьте pull request

## Будущие улучшения

- **Загрузка файлов**: Аватары пользователей и изображения постов
- **Функции реального времени**: Поддержка WebSocket для обновлений в реальном времени
- **Расширенный поиск**: Поиск постов и пользователей
- **Мобильное приложение**: Мобильное приложение на React Native или Flutter
- **Документация API**: Документация Swagger/OpenAPI
- **Оптимизация производительности**: Кэширование и оптимизация запросов

## Лицензия

Этот проект лицензирован под лицензией MIT - см. файл LICENSE для подробностей.

## Поддержка

По вопросам или проблемам, пожалуйста, создайте issue в репозитории или свяжитесь с командой разработки. 